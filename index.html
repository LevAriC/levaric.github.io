<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lighting Collections — Omer Zimmerman Studio</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
</head>
<body class="lighting-page">
    <!-- Floating Home Button -->
    <a href="https://omerzimer.com" class="floating-home" title="Omer Zimmermann Studio">
        <img src="Assets/Logo/oz-logo-png.png" alt="Omer Zimmermann Logo" class="floating-logo">
        <span class="home-tooltip">Home</span>
    </a>

    <!-- Text-only Back Link -->
    <a class="back-link" href="#" aria-label="Go back">Back</a>

    <!-- Video Header -->
    <div class="video-header">
        <video class="hero-video" autoplay muted loop playsinline>
            <source src="Assets/Lighting/RiBS/wes.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <!-- Text Overlay -->
        <div class="video-overlay">
            <h1>RIBS + MIRROR</h1>
            <p>Lights by Omer Zimmermann</p>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const video = document.querySelector('.hero-video');
            const body = document.body;

            // Debug video loading
            video.addEventListener('error', function(e) {
                console.error('Error loading video:', e);
                console.log('Video path:', video.querySelector('source').src);
            });

            // Handle scroll transition
            window.addEventListener('scroll', function() {
                if (window.scrollY > 100) {
                    body.classList.add('scrolled');
                } else {
                    body.classList.remove('scrolled');
                }
            });

            // Deterministic back link behavior
            (function(){
                const link = document.querySelector('.back-link');
                if(!link) return;

                const RIBS_COLLECTION_URL = 'https://omerzimer.com/collections/ribs.html';
                const HOME_PATH = '/';

                // Normalize current path
                const path = location.pathname.replace(/\/index\.html$/i, '').toLowerCase();

                // Detect pages
                const isHome =
                    document.body.classList.contains('page-home') ||
                    document.body.classList.contains('home') ||
                    path === '/' ;

                // Consider these as "RIBS collection" pages (local or deployed)
                const isRibsCollection =
                    path === '/ribs' || path === '/ribs/' ||
                    path.endsWith('/collections/ribs.html');

                // Any deeper RIBS subpage (pendant/wall/strip), in either style of routing:
                const isRibsSubpage =
                    /^\/ribs\/(pendant|wall|strip)(\/|\.html|$)/i.test(path) ||
                    /\/collections\/ribs\/(pendant|wall|strip)(\/|\.html|$)/i.test(path) ||
                    /\/ribs-(pendant|wall|strip)\.html$/i.test(path);

                function parentPath(p){
                    const parent = p.replace(/\/[^\/]+\/?$/, '') || '/';
                    return parent;
                }

                // Compute deterministic target (no history.back)
                function computeTarget(){
                    if (isHome) return null;                              // no Back on Home
                    if (isRibsSubpage) return RIBS_COLLECTION_URL;        // RIBS subpages -> your URL
                    if (isRibsCollection) return HOME_PATH;               // RIBS collection -> Home
                    return parentPath(path);                              // generic fallback
                }

                const target = computeTarget();

                if (!target || (target === path)) {
                    link.remove(); // nothing meaningful to do
                    return;
                }

                // Update href so it still works if JS is slow/blocked
                link.setAttribute('href', target);

                // Click -> navigate to target
                link.addEventListener('click', function(ev){
                    ev.preventDefault();
                    window.location.assign(target);
                });
            })();
        });
    </script>

    <!-- Lighting Collections Overview -->
    <div class="lighting-overview">
        <div class="lighting-grid">
            <!-- RIBS Collection -->
            <a href="collections/ribs.html" class="collection-card">
                <img src="Assets/Lighting/RiBS/1.jpg" alt="RIBS Collection" class="collection-image">
                <div class="collection-overlay">
                    <h2 class="collection-title">RIBS Collection®</h2>
                    <p class="collection-subtitle">Ribbed shades. Wall or hanging.<br>Some cozy, some sharp.</p>
                    <span class="collection-link">View Collection →</span>
                </div>
            </a>

            <!-- Mirror System -->
            <a href="collections/mirror.html" class="collection-card">
                <img src="Assets/Lighting/MiRROR/1.jpg" alt="Mirror System" class="collection-image">
                <div class="collection-overlay">
                    <h2 class="collection-title">Mirror System®</h2>
                    <p class="collection-subtitle">A mirror with built-in light.<br>Pick the shape, pick the size.</p>
                    <span class="collection-link">View Collection →</span>
                </div>
            </a>
        </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <p class="studio-info">Omer Zimmerman Studio<br>
            Handmade in Tel Aviv since 2017</p>
            <div class="footer-links">
                <a href="https://www.instagram.com/omerzimmermann/" target="_blank" rel="noopener">Instagram</a>
                <span class="separator">·</span>
                <a href="mailto:contact@omerzimmerman.com">Email</a>
                <span class="separator">·</span>
                <a href="#contact">Contact</a>
            </div>
        </div>
    </footer>
</body>
</html>
