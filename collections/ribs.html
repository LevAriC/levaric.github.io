<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" conte            /* Sticky behavior targets video-overlay */
            .ribs-hero .video-overlay.is-sticky {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                height: var(--hero-sticky-h);
                display: flex;
                align-items: center;
                padding: 0 var(--hero-padding-x);
                z-index: calc(var(--hero-z) + 1);
                background: linear-gradient(to bottom, rgba(0,0,0,0.25), rgba(0,0,0,0));
                backdrop-filter: blur(1px);
                -webkit-backdrop-filter: blur(1px);
            }idth, initial-scale=1.0">
    <title>RIBS Collection® — Omer Zimmerman Studio</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../styles/main.css">
        <link rel="stylesheet" href="../styles/ribs.css">
        <style>
            :root {
                --hero-sticky-h: 15vh;
                --hero-padding-x: 5vw;
                --hero-padding-b: 4vh;
                --hero-z: 50;

                --sticky-text: #ffffff;
                --sticky-bg: rgba(0,0,0,0.45);
            }

            /* The scrolling content layer */
            .ribs-page {
                position: relative;
                z-index: 1;
            }

            /* Make sure body and sections are transparent so backdrop shows through */
            html, body, .ribs-page, .ribs-hero, #ribs-grid {
                background: transparent;
            }

            /* Ensure clean page ending with no gaps after grid */
            body, html {
                margin: 0;
                padding: 0;
            }

            .ribs-page {
                margin: 0;
                padding: 0;
            }

            /* Hero section with embedded background */
            .ribs-hero {
                position: relative;
                height: 100vh;
                min-height: 540px;
                width: 100%;
                overflow: visible;
            }

            /* Background image within hero section */
            .hero-background {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-image: url("../Assets/Lighting/RiBS/RiBSLong/5.jpg");
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                z-index: 1;
            }

            /* Video overlay - matches homepage structure */
            .ribs-hero .video-overlay {
                position: absolute;
                bottom: var(--hero-padding-b);
                left: var(--hero-padding-x);
                right: var(--hero-padding-x);
                text-align: left;
                color: white;
                font-family: 'Space Grotesk', sans-serif;
                z-index: 12;
                mix-blend-mode: difference;
            }

            /* Headline inherits blend behavior from video-overlay */
            .hero-headline {
                margin: 0;
                padding: 0.25rem 0;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                font-size: clamp(2rem, 4.2vw, 4rem);
                line-height: 1.1;
                font-weight: 300;
                letter-spacing: 0.02em;
            }

            /* Sticky headline occupying top 15vh */
            .hero-headline.is-sticky {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                height: var(--hero-sticky-h);
                display: flex;
                align-items: center;
                padding: 0 var(--hero-padding-x);
                bottom: auto;
                z-index: calc(var(--hero-z) + 1);

                /* subtle gradient for readability while still showing backdrop */
                background: linear-gradient(to bottom, rgba(0,0,0,0.35), rgba(0,0,0,0));
                backdrop-filter: blur(2px);
                -webkit-backdrop-filter: blur(2px);
            }

            /* When the hero area is no longer behind the sticky headline (e.g., deep scroll), fallback to solid for legibility */
            body.hero-stuck-nohero .ribs-hero .video-overlay.is-sticky {
                mix-blend-mode: normal;
                color: var(--sticky-text);
                background: var(--sticky-bg);
            }
            
            body.hero-stuck-nohero .ribs-hero .video-overlay.is-sticky .hero-headline {
                text-shadow: 0 1px 10px rgba(0,0,0,0.35);
            }

            /* Push grid below sticky headline (only when sticky) */
            body.hero-stuck #ribs-grid {
                margin-top: var(--hero-sticky-h);
            }
            #ribs-grid { margin-top: 0; }

            /* Remove any borders/dividers under hero */
            .ribs-hero, #ribs-grid {
                border: none;
            }

            /* Grid Styles */
            .ribs-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 0;
                width: 100%;
                min-height: 100vh;
                background: transparent;
                padding: 0;
                position: relative;
                z-index: 1;
            }

            @media (max-width: 1023.98px) {
                .ribs-grid {
                    grid-template-columns: repeat(2, 1fr);
                    min-height: 80vh;
                }
            }

            @media (max-width: 599.98px) {
                .ribs-grid {
                    grid-template-columns: 1fr;
                    min-height: auto;
                }
            }

            @media (min-width: 600px) and (max-width: 1023.98px) {
                .ribs-grid .format-card:last-child {
                    grid-column: 1 / -1;
                }
            }

            .ribs-grid > * {
                position: relative;
                overflow: hidden;
                margin: 0;
                padding: 0;
                border: 0;
            }

            .ribs-grid img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                display: block;
            }

            .format-card {
                position: relative;
                display: block;
                text-decoration: none;
                color: inherit;
                outline-offset: 3px;
                min-height: 33vh;
                height: 100%;
            }

            .format-preview {
                position: relative;
                width: 100%;
                overflow: hidden;
                margin: 0;
                border-radius: 0;
                background: transparent;
                height: 100%;
            }

            .format-info {
                position: absolute;
                left: 1rem;
                bottom: 1rem;
                z-index: 1;
                padding: 0;
                background: transparent !important;
                color: #fff;
                pointer-events: none;
                max-width: 85%;
                transform: translateY(6px);
                opacity: 0;
                transition: opacity .25s ease, transform .25s ease;
                box-shadow: none !important;
                backdrop-filter: none !important;
                -webkit-backdrop-filter: none !important;
            }

            .format-info::before,
            .format-info::after {
                display: none !important;
            }

            .format-info h3 {
                margin: 0;
                font-size: clamp(16px, 2vw, 22px);
                font-weight: 300;
                letter-spacing: 0.02em;
                color: #fff;
                -webkit-text-stroke: 0.4px rgba(0,0,0,0.35);
                text-shadow: 0 1px 2px rgba(0,0,0,0.55), 0 0 12px rgba(0,0,0,0.25);
            }

            .format-card:hover .format-info,
            .format-card:focus .format-info,
            .format-card:focus-visible .format-info {
                opacity: 1;
                transform: translateY(0);
            }

            @media (hover: none) and (pointer: coarse) {
                .format-info {
                    opacity: 1 !important;
                    transform: none !important;
                }
            }

            .format-card:focus-visible {
                outline: 2px solid #fff;
            }

            /* Accessibility: high contrast avoids blend mode */
            @media (prefers-contrast: more) {
                .hero-headline { 
                    mix-blend-mode: normal; 
                    color: #ffffff; 
                    text-shadow: 0 2px 12px rgba(0,0,0,0.6); 
                }
            }

            @media (max-width: 640px) {
                .hero-headline { 
                    font-size: clamp(1.6rem, 6vw, 2.2rem); 
                }
            }

            /* Reduced motion preferences */
            @media (prefers-reduced-motion: reduce) {
                .hero-headline {
                    transition: none;
                }
            }
        </style>
    </head>
    <body class="ribs-landing">
    <!-- Floating Home Button -->
    <a href="../index.html" class="floating-home" title="Home">
        <img src="../Assets/Logo/oz-logo-png.png" alt="Omer Zimmermann Logo" class="floating-logo">
        <span class="home-tooltip">Home</span>
    </a>

    <!-- Text-only Back Link -->
    <a class="back-link" href="#" aria-label="Go back">Back</a>

    <!-- Fixed full-page hero backdrop -->
    <main class="ribs-page">
        <section class="ribs-hero" aria-label="RIBS Collection hero">
            <div class="hero-background"></div>
            <div class="video-overlay">
                <h1 class="hero-headline">RIBS Collection</h1>
            </div>
        </section>

        <section id="ribs-grid" class="collection-overview ribs-grid" aria-label="RIBS formats">
            <!-- Pendant Format -->
        <a href="ribs/pendant.html" class="format-card" data-format="pendant" aria-label="RIBS Pendant">
                <div class="format-preview">
                    <img src="../Assets/ribs/pandent/ribs-pendant-600-birch.jpg" alt="RIBS Pendant" loading="lazy" decoding="async">
                </div>
                <div class="format-info">
                    <h3>RIBS Pendant</h3>
                </div>
            </a>

            <!-- Wall Format -->
        <a href="ribs/wall.html" class="format-card" data-format="wall" aria-label="RIBS Wall">
                <div class="format-preview">
                    <img src="../Assets/ribs/wall/ribs-wall-birch-1.png" alt="RIBS Wall" loading="lazy" decoding="async">
                </div>
                <div class="format-info">
                    <h3>RIBS Wall</h3>
                </div>
            </a>

            <!-- Strip Format -->
        <a href="ribs/strip.html" class="format-card" data-format="strip" aria-label="RIBS Strip">
                <div class="format-preview">
                    <img src="../Assets/ribs/strip/strip_birch_1.png" alt="RIBS Strip" loading="lazy" decoding="async">
                </div>
                <div class="format-info">
                    <h3>RIBS Strip</h3>
                </div>
            </a>
    </section>

    </main>

    <script>
    (function() {
      const hero = document.querySelector('.ribs-hero');
      const headline = document.querySelector('.ribs-hero .video-overlay');
      const grid = document.querySelector('#ribs-grid');
      if (!hero || !headline || !grid) return;

      // Invisible sentinel at bottom of the hero to know when to stick
      const sentinel = document.createElement('div');
      Object.assign(sentinel.style, { 
        position:'absolute', 
        left:'0', 
        right:'0', 
        bottom:'0', 
        height:'1px', 
        pointerEvents:'none' 
      });
      sentinel.setAttribute('aria-hidden', 'true');
      hero.appendChild(sentinel);

      const STICKY_VH = 15;

      function updateBlendFallback() {
        const heroBottom = hero.getBoundingClientRect().bottom;
        const stickyZoneBottom = (window.innerHeight * (STICKY_VH / 100));

        // If hero bottom is above the sticky zone, the backdrop isn't behind the sticky headline -> fallback
        const noHeroBehindSticky = headline.classList.contains('is-sticky') && heroBottom < stickyZoneBottom - 1;

        if (noHeroBehindSticky) {
          document.body.classList.add('hero-stuck-nohero');
        } else {
          document.body.classList.remove('hero-stuck-nohero');
        }
      }

      const observer = new IntersectionObserver(
        () => {
          const heroBottom = hero.getBoundingClientRect().bottom;
          const threshold = (window.innerHeight * (STICKY_VH / 100));
          const shouldStick = heroBottom <= threshold + 0.5;

          if (shouldStick) {
            if (!headline.classList.contains('is-sticky')) {
              headline.classList.add('is-sticky');
              document.body.classList.add('hero-stuck');
            }
          } else {
            if (headline.classList.contains('is-sticky')) {
              headline.classList.remove('is-sticky');
              document.body.classList.remove('hero-stuck');
              document.body.classList.remove('hero-stuck-nohero');
            }
          }
          updateBlendFallback();
        },
        { 
          root: null, 
          threshold: [0, 1], 
          rootMargin: `-${STICKY_VH}vh 0px 0px 0px` 
        }
      );

      observer.observe(sentinel);

      window.addEventListener('scroll', updateBlendFallback, { passive: true });
      window.addEventListener('resize', updateBlendFallback);
    })();

    // Deterministic back link behavior
    (function(){
        const link = document.querySelector('.back-link');
        if(!link) return;

        const RIBS_COLLECTION_URL = 'https://omerzimer.com/collections/ribs.html';
        const HOME_PATH = '/';

        // Normalize current path
        const path = location.pathname.replace(/\/index\.html$/i, '').toLowerCase();

        // Detect pages
        const isHome =
            document.body.classList.contains('page-home') ||
            document.body.classList.contains('home') ||
            path === '/' ;

        // Consider these as "RIBS collection" pages (local or deployed)
        const isRibsCollection =
            path === '/ribs' || path === '/ribs/' ||
            path.endsWith('/collections/ribs.html');

        // Any deeper RIBS subpage (pendant/wall/strip), in either style of routing:
        const isRibsSubpage =
            /^\/ribs\/(pendant|wall|strip)(\/|\.html|$)/i.test(path) ||
            /\/collections\/ribs\/(pendant|wall|strip)(\/|\.html|$)/i.test(path) ||
            /\/ribs-(pendant|wall|strip)\.html$/i.test(path);

        function parentPath(p){
            const parent = p.replace(/\/[^\/]+\/?$/, '') || '/';
            return parent;
        }

        // Compute deterministic target (no history.back)
        function computeTarget(){
            if (isHome) return null;                              // no Back on Home
            if (isRibsSubpage) return RIBS_COLLECTION_URL;        // RIBS subpages -> your URL
            if (isRibsCollection) return HOME_PATH;               // RIBS collection -> Home
            return parentPath(path);                              // generic fallback
        }

        const target = computeTarget();

        if (!target || (target === path)) {
            link.remove(); // nothing meaningful to do
            return;
        }

        // Update href so it still works if JS is slow/blocked
        link.setAttribute('href', target);

        // Click -> navigate to target
        link.addEventListener('click', function(ev){
            ev.preventDefault();
            window.location.assign(target);
        });
    })();
    </script>
</body>
</html>

