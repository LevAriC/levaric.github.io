<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RIBS Wall â€” Omer Zimmerman Studio</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/ribs.css">
</head>
<body>
    <!-- Floating Home Button -->
    <a href="../../index.html" class="floating-home" title="Home">
        <img src="../../Assets/Logo/oz-logo-png.png" alt="Omer Zimmermann Logo" class="floating-logo">
        <span class="home-tooltip">Home</span>
    </a>

    <div class="product-layout">
        <div class="product-gallery">
            <div class="gallery-slideshow">
                <img src="../../Assets/ribs/wall/ribs-wall-birch-1.png" alt="RIBS Wall in birch - View 1" class="active">
                <img src="../../Assets/ribs/wall/ribs-wall-birch-2.png" alt="RIBS Wall in birch - View 2">
                <img src="../../Assets/ribs/wall/ribs-wall-birch-3.png" alt="RIBS Wall in birch - View 3">
                <img src="../../Assets/ribs/wall/ribs-wall-birch-4.png" alt="RIBS Wall in birch - View 4">
                <button class="gallery-nav prev" aria-label="Previous image">&#8592;</button>
                <button class="gallery-nav next" aria-label="Next image">&#8594;</button>
            </div>
        </div>

        <div class="product-info">
            <h1 class="product-title">RIBS Wall</h1>
            <p class="product-description">A sculptural lighting element that transforms your wall into an artistic statement. Perfect for hallways, living spaces, and architectural features.</p>

            <div class="product-selector">
                <div class="selector-group">
                    <h3 class="selector-label">Material</h3>
                    <div class="selector-options">
                        <div class="selector-option" data-material="birch">Birch</div>
                        <div class="selector-option" data-material="aluminum">Aluminum</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const options = document.querySelectorAll('.selector-option');
            const galleryImages = document.querySelectorAll('.gallery-slideshow img');
            const galleryContainer = document.querySelector('.gallery-slideshow');
            let currentMaterial = 'birch';
            let currentImageIndex = 0;
            let slideshowInterval;
            let isPaused = false;
            
            // Zoom functionality
            let scale = 1;
            let translateX = 0;
            let translateY = 0;
            let isDragging = false;
            let startX, startY, initialX, initialY;
            
            // Navigation functions
            function showImage(index) {
                galleryImages.forEach(img => img.classList.remove('active'));
                currentImageIndex = (index + galleryImages.length) % galleryImages.length;
                galleryImages[currentImageIndex].classList.add('active');
            }

            function nextImage() {
                showImage(currentImageIndex + 1);
            }

            function prevImage() {
                showImage(currentImageIndex - 1);
            }

            // Update gallery images based on material selection
            function updateGallery(material) {
                galleryImages.forEach((img, index) => {
                    const imageNumber = index + 1;
                    img.src = `../../Assets/ribs/wall/ribs-wall-${material}-${imageNumber}.png`;
                    img.alt = `RIBS Wall in ${material} - View ${imageNumber}`;
                });
            }
            
            // Rotate through images in slideshow
            function rotateImages() {
                if (!isPaused) {
                    nextImage();
                }
            }
            
            // Start slideshow
            function startSlideshow() {
                if (slideshowInterval) clearInterval(slideshowInterval);
                slideshowInterval = setInterval(rotateImages, 3000);
            }

            // Add navigation event listeners
            document.querySelector('.gallery-nav.next').addEventListener('click', (e) => {
                e.stopPropagation();
                nextImage();
            });

            document.querySelector('.gallery-nav.prev').addEventListener('click', (e) => {
                e.stopPropagation();
                prevImage();
            });

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                    prevImage();
                } else if (e.key === 'ArrowRight') {
                    nextImage();
                } else if (e.key === 'Escape') {
                    resetZoom();
                }
            });

            // Zoom functionality
            function updateTransform(img) {
                img.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
            }

            function resetZoom() {
                scale = 1;
                translateX = 0;
                translateY = 0;
                galleryContainer.classList.remove('zoomed');
                const activeImage = document.querySelector('.gallery-slideshow img.active');
                updateTransform(activeImage);
            }

            // Wheel zoom handler
            galleryContainer.addEventListener('wheel', (e) => {
                e.preventDefault();
                const activeImage = document.querySelector('.gallery-slideshow img.active');
                
                const rect = galleryContainer.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                // Calculate zoom
                const delta = -Math.sign(e.deltaY) * 0.1;
                const newScale = Math.min(Math.max(1, scale + delta), 4);
                
                if (newScale !== scale) {
                    // Calculate cursor position relative to image
                    const scaleChange = newScale - scale;
                    translateX -= (mouseX - translateX) * (scaleChange / scale);
                    translateY -= (mouseY - translateY) * (scaleChange / scale);
                    
                    scale = newScale;
                    
                    // Update cursor and transform
                    galleryContainer.classList.toggle('zoomed', scale > 1);
                    updateTransform(activeImage);
                }
            });

            // Mouse drag functionality
            galleryContainer.addEventListener('mousedown', (e) => {
                if (scale > 1) {
                    isDragging = true;
                    startX = e.clientX - translateX;
                    startY = e.clientY - translateY;
                    galleryContainer.style.cursor = 'grabbing';
                }
            });

            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    e.preventDefault();
                    const activeImage = document.querySelector('.gallery-slideshow img.active');
                    
                    translateX = e.clientX - startX;
                    translateY = e.clientY - startY;
                    
                    // Constrain panning
                    const maxTranslateX = (scale - 1) * galleryContainer.offsetWidth / 2;
                    const maxTranslateY = (scale - 1) * galleryContainer.offsetHeight / 2;
                    
                    translateX = Math.min(Math.max(-maxTranslateX, translateX), maxTranslateX);
                    translateY = Math.min(Math.max(-maxTranslateY, translateY), maxTranslateY);
                    
                    updateTransform(activeImage);
                }
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
                galleryContainer.style.cursor = scale > 1 ? 'move' : 'zoom-in';
            });

            // Reset zoom when changing images
            function showImage(index) {
                resetZoom();
                galleryImages.forEach(img => img.classList.remove('active'));
                currentImageIndex = (index + galleryImages.length) % galleryImages.length;
                galleryImages[currentImageIndex].classList.add('active');
            }
            
            // Pause on hover
            galleryContainer.addEventListener('mouseenter', () => {
                isPaused = true;
            });
            
            // Resume on mouse leave
            galleryContainer.addEventListener('mouseleave', () => {
                isPaused = false;
            });
            
            // Start slideshow initially
            startSlideshow();
            
            // Set initial active state
            document.querySelector('[data-material="birch"]').classList.add('active');
            
            // Handle material selection
            options.forEach(option => {
                option.addEventListener('click', function() {
                    // Update active state
                    options.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update gallery
                    const material = this.getAttribute('data-material').toLowerCase();
                    currentMaterial = material;
                    updateGallery(material);
                });
            });
        });
    </script>
</body>
</html>
